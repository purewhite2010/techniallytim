<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Technically Tim - Blog</title><link href="//tim.purewhite.id.au/" rel="alternate"></link><link href="//tim.purewhite.id.au/feeds/blog.atom.xml" rel="self"></link><id>//tim.purewhite.id.au/</id><updated>2015-10-05T00:00:00+10:00</updated><entry><title>Wordpress Media in Google Cloud Storage</title><link href="//tim.purewhite.id.au/2015/10/wordpress-google-cloud-storage/" rel="alternate"></link><published>2015-10-05T00:00:00+10:00</published><updated>2015-10-05T00:00:00+10:00</updated><author><name>Tim White</name></author><id>tag:tim.purewhite.id.au,2015-10-05:/2015/10/wordpress-google-cloud-storage/</id><summary type="html">&lt;p&gt;One of the big challenges with Wordpress in the cloud, is the media we upload.
As soon as we upload media files, the Wordpress instance has data that isn't
stored in the database. This prevents us for example having a docker Wordpress
install that we can scale up as required â€¦&lt;/p&gt;</summary><content type="html">&lt;p&gt;One of the big challenges with Wordpress in the cloud, is the media we upload.
As soon as we upload media files, the Wordpress instance has data that isn't
stored in the database. This prevents us for example having a docker Wordpress
install that we can scale up as required, without some method for syncronising
the wp-content/uploads directory. &lt;a href="https://wordpress.org/plugins/wp2cloud-wordpress-to-cloud/"&gt;WP2Cloud&lt;/a&gt;
solves this with the ClouSE storage engine, that attaches to MySQL. Without the Clouse storage
engine, the plugin is dead in the water. Which is really sad, because it
supports Amazon S3, and Google Cloud Storage.&lt;/p&gt;
&lt;p&gt;Then there are a number of different plugins available that try to solve this
issue, some with Amazon S3 support, others with Google Drive support, and
others with OpenStack's Object Storage, Swift.&lt;/p&gt;
&lt;p&gt;However, very little properly supports Google Cloud Storage, which is different 
from Google Drive. Why do I care about Google Cloud Storage? Firstly, it's
cheaper than Amazon S3. Secondly, I have a number of other business solutions
with Google, and sometimes keeping things together makes it easier. Lastly,
because no one seems to be doing, so lets try!&lt;/p&gt;
&lt;p&gt;Initially, I thought I'd have to write an entire plugin myself. Thankfully,
some plugins are GPLed so I can look at the code and get an idea of what I need
for a basic plugin. And then, I stumbled upon the Golden Key.
&lt;a href="https://cloud.google.com/storage/docs/migrating"&gt;Migrating from Amazon S3 to Google Cloud Storage&lt;/a&gt;.
Google has done something that I had hoped, but hadn't found in my initial
searches. They support the Amazon S3 XML API!&lt;/p&gt;
&lt;p&gt;The original &lt;a href="https://wordpress.org/plugins/tantan-s3/"&gt;Amazon S3 for WordPress plugin by
tantan&lt;/a&gt; hadn't been updated since
2009. But it was forked, which was also then forked, and now we have
&lt;a href="https://wordpress.org/plugins/amazon-s3-and-cloudfront/"&gt;WP Offload S3&lt;/a&gt; which
claims to be completely rewritten. Looking at the tantan-s3 code, it may have
been easier for me to start with that. However, the WP Offload S3 plugin uses
what I believe are official AWS PHP libraries. It's also a recently updaded
plugin.&lt;/p&gt;
&lt;p&gt;After about 30 minutes playing around with S3, Google Cloud Storage, and the WP
Offload S3 plugin (and the associated &lt;a href="https://wordpress.org/plugins/amazon-web-services/"&gt;Amazon Web
Services&lt;/a&gt; plugin), I was
able to get it uploading to Google Cloud Storage, over the S3 API! The main
battle was getting it to communicate with Google's endpoint, instead of
Amazon's endpoint. One of the big differences between Amazon and Google, is
that Amazon's endpoints are dependent on the region you are using. Google
appears to have a single endpoint, which they presumably route to your closest
Google datacentre.&lt;/p&gt;
&lt;p&gt;I may still try to create a native Google Cloud Storage plugin for wordpress,
but for now, this is a start!&lt;/p&gt;
&lt;p&gt;2 Small Patches
&lt;a href="https://github.com/timwhite/wp-amazon-s3-and-cloudfront/commit/8b55698c8e937a585646d8ecd0682db088c8dc76"&gt;here&lt;/a&gt;
and
&lt;a href="https://github.com/timwhite/wp-amazon-web-services/commit/56cc81e58894150e5e8e89a3f59e25458d956080"&gt;here&lt;/a&gt;
and I now have an Amazon S3 plugin uploading to Google instead of Amazon!&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;And, as a bonus, if you've read this far, and you are applying this to an
existing site. You &lt;em&gt;can&lt;/em&gt; upload existing media with the S3 plugin. All media
libraries have an entry in the wp_posts table with post_type set to attachment.
If you fetch all the ID's for the items you wish to upload, and have the handy
&lt;a href="http://wp-cli.org"&gt;wp-cli.org&lt;/a&gt; tool installed, it's as simple as running the following tool for
each ID, in this case the media item ID is 7.&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;wp &lt;span class="nb"&gt;eval&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;do_action(&amp;#39;&lt;/span&gt;wp_update_attachment_metadata&lt;span class="s1"&gt;&amp;#39;, null, 7);&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Or a quick bash script to upload all attachments&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt; i in &lt;span class="k"&gt;$(&lt;/span&gt;wp-cli.phar db query &lt;span class="s2"&gt;&amp;quot;SELECT ID FROM wp_posts WHERE&lt;/span&gt;
&lt;span class="s2"&gt;post_type=&amp;#39;attachment&amp;#39;;&amp;quot;&lt;/span&gt;  &lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;do&lt;/span&gt; &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="nv"&gt;$i&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; wp-cli.phar &lt;span class="nb"&gt;eval&lt;/span&gt;
&lt;span class="s2"&gt;&amp;quot;do_action(&amp;#39;wp_update_attachment_metadata&amp;#39;, null, &lt;/span&gt;&lt;span class="nv"&gt;$i&lt;/span&gt;&lt;span class="s2"&gt;);&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;done&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Edit: Seems some issues with V2 vs V4 signatures. Not sure what changed but I
made a few more commits, you'll probably want to look at GitHub for the extra
changes&lt;/p&gt;
&lt;p&gt;For reference, those above patches are also here:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;c81e58894150e5e8e89a3f59e25458d956080 Mon Sep 17 00:00:00 2001
From: Tim White &amp;lt;tim@whiteitsolutions.com.au&amp;gt;
Date: Mon, 5 Oct 2015 13:23:28 +1000
Subject: [PATCH] Changes for using Google Cloud Storage instead of Amazon S3

&lt;span class="gd"&gt;---&lt;/span&gt;
 vendor/aws/Aws/Common/Client/ClientBuilder.php       | 2 +-
 vendor/aws/Aws/Common/Resources/public-endpoints.php | 3 +++
 vendor/aws/Aws/S3/Resources/s3-2006-03-01.php        | 7 ++++++-
 3 files changed, 10 insertions(+), 2 deletions(-)

&lt;span class="gh"&gt;diff --git a/vendor/aws/Aws/Common/Client/ClientBuilder.php&lt;/span&gt;
b/vendor/aws/Aws/Common/Client/ClientBuilder.php
&lt;span class="gh"&gt;index 34647e9..1e900ac 100644&lt;/span&gt;
&lt;span class="gd"&gt;--- a/vendor/aws/Aws/Common/Client/ClientBuilder.php&lt;/span&gt;
&lt;span class="gi"&gt;+++ b/vendor/aws/Aws/Common/Client/ClientBuilder.php&lt;/span&gt;
&lt;span class="gu"&gt;@@ -446,7 +446,7 @@ private function handleRegion(Collection $config)&lt;/span&gt;
                 &amp;#39;A region is required when using &amp;#39; .
$description-&amp;gt;getData(&amp;#39;serviceFullName&amp;#39;)
             );
         } elseif ($global &amp;amp;&amp;amp; !$region) {
&lt;span class="gd"&gt;-            $config[Options::REGION] = &amp;#39;us-east-1&amp;#39;;&lt;/span&gt;
&lt;span class="gi"&gt;+            $config[Options::REGION] = &amp;#39;global&amp;#39;;&lt;/span&gt;
         }
     }

&lt;span class="gh"&gt;diff --git a/vendor/aws/Aws/Common/Resources/public-endpoints.php&lt;/span&gt;
b/vendor/aws/Aws/Common/Resources/public-endpoints.php
&lt;span class="gh"&gt;index d939f1f..122a02c 100644&lt;/span&gt;
&lt;span class="gd"&gt;--- a/vendor/aws/Aws/Common/Resources/public-endpoints.php&lt;/span&gt;
&lt;span class="gi"&gt;+++ b/vendor/aws/Aws/Common/Resources/public-endpoints.php&lt;/span&gt;
&lt;span class="gu"&gt;@@ -54,6 +54,9 @@&lt;/span&gt;
         &amp;#39;us-east-1/s3&amp;#39; =&amp;gt; array(
             &amp;#39;endpoint&amp;#39; =&amp;gt; &amp;#39;s3.amazonaws.com&amp;#39;
         ),
&lt;span class="gi"&gt;+        &amp;#39;global/s3&amp;#39; =&amp;gt; array(&lt;/span&gt;
&lt;span class="gi"&gt;+            &amp;#39;endpoint&amp;#39; =&amp;gt; &amp;#39;storage.googleapis.com&amp;#39;&lt;/span&gt;
&lt;span class="gi"&gt;+        ),&lt;/span&gt;
         &amp;#39;us-west-1/s3&amp;#39; =&amp;gt; array(
             &amp;#39;endpoint&amp;#39; =&amp;gt; &amp;#39;s3-{region}.amazonaws.com&amp;#39;
         ),
&lt;span class="gh"&gt;diff --git a/vendor/aws/Aws/S3/Resources/s3-2006-03-01.php&lt;/span&gt;
b/vendor/aws/Aws/S3/Resources/s3-2006-03-01.php
&lt;span class="gh"&gt;index 5699058..d9af677 100644&lt;/span&gt;
&lt;span class="gd"&gt;--- a/vendor/aws/Aws/S3/Resources/s3-2006-03-01.php&lt;/span&gt;
&lt;span class="gi"&gt;+++ b/vendor/aws/Aws/S3/Resources/s3-2006-03-01.php&lt;/span&gt;
&lt;span class="gu"&gt;@@ -21,10 +21,15 @@&lt;/span&gt;
     &amp;#39;serviceAbbreviation&amp;#39; =&amp;gt; &amp;#39;Amazon S3&amp;#39;,
     &amp;#39;serviceType&amp;#39; =&amp;gt; &amp;#39;rest-xml&amp;#39;,
     &amp;#39;timestampFormat&amp;#39; =&amp;gt; &amp;#39;rfc822&amp;#39;,
&lt;span class="gd"&gt;-    &amp;#39;globalEndpoint&amp;#39; =&amp;gt; &amp;#39;s3.amazonaws.com&amp;#39;,&lt;/span&gt;
&lt;span class="gi"&gt;+    &amp;#39;globalEndpoint&amp;#39; =&amp;gt; &amp;#39;storage.googleapis.com&amp;#39;,&lt;/span&gt;
     &amp;#39;signatureVersion&amp;#39; =&amp;gt; &amp;#39;s3&amp;#39;,
     &amp;#39;namespace&amp;#39; =&amp;gt; &amp;#39;S3&amp;#39;,
     &amp;#39;regions&amp;#39; =&amp;gt; array(
&lt;span class="gi"&gt;+        &amp;#39;global&amp;#39; =&amp;gt; array(&lt;/span&gt;
&lt;span class="gi"&gt;+            &amp;#39;http&amp;#39; =&amp;gt; true,&lt;/span&gt;
&lt;span class="gi"&gt;+            &amp;#39;https&amp;#39; =&amp;gt; true,&lt;/span&gt;
&lt;span class="gi"&gt;+            &amp;#39;hostname&amp;#39; =&amp;gt; &amp;#39;storage.googleapis.com&amp;#39;,&lt;/span&gt;
&lt;span class="gi"&gt;+        ),&lt;/span&gt;
         &amp;#39;us-east-1&amp;#39; =&amp;gt; array(
             &amp;#39;http&amp;#39; =&amp;gt; true,
             &amp;#39;https&amp;#39; =&amp;gt; true,
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;From 8b55698c8e937a585646d8ecd0682db088c8dc76 Mon Sep 17 00:00:00 2001
From: Tim White &amp;lt;tim@whiteitsolutions.com.au&amp;gt;
Date: Mon, 5 Oct 2015 13:12:25 +1000
Subject: [PATCH] Minor changes to make it work with Google Cloud Storage
 instead

&lt;span class="gd"&gt;---&lt;/span&gt;
 classes/amazon-s3-and-cloudfront.php | 8 ++++----
 view/domain-setting.php              | 4 ++--
 2 files changed, 6 insertions(+), 6 deletions(-)

&lt;span class="gh"&gt;diff --git a/classes/amazon-s3-and-cloudfront.php&lt;/span&gt;
b/classes/amazon-s3-and-cloudfront.php
&lt;span class="gh"&gt;index c0553d2..b3f62b2 100644&lt;/span&gt;
&lt;span class="gd"&gt;--- a/classes/amazon-s3-and-cloudfront.php&lt;/span&gt;
&lt;span class="gi"&gt;+++ b/classes/amazon-s3-and-cloudfront.php&lt;/span&gt;
&lt;span class="gu"&gt;@@ -55,7 +55,7 @@ class Amazon_S3_And_CloudFront extends AWS_Plugin_Base {&lt;/span&gt;
    const DEFAULT_ACL = &amp;#39;public-read&amp;#39;;
    const PRIVATE_ACL = &amp;#39;private&amp;#39;;
    const DEFAULT_EXPIRES = 900;
&lt;span class="gd"&gt;-   const DEFAULT_REGION = &amp;#39;us-east-1&amp;#39;;&lt;/span&gt;
&lt;span class="gi"&gt;+   const DEFAULT_REGION = &amp;#39;global&amp;#39;;&lt;/span&gt;

    const SETTINGS_KEY = &amp;#39;tantan_wordpress_s3&amp;#39;;

&lt;span class="gu"&gt;@@ -998,7 +998,7 @@ function get_file_prefix( $time = null, $post_id = null ) {&lt;/span&gt;
     * @return string
     */
    function get_s3_url_prefix( $region = &amp;#39;&amp;#39;, $expires = null ) {
&lt;span class="gd"&gt;-       $prefix = &amp;#39;s3&amp;#39;;&lt;/span&gt;
&lt;span class="gi"&gt;+       $prefix = &amp;#39;storage&amp;#39;;&lt;/span&gt;

        if ( &amp;#39;&amp;#39; !== $region ) {
            $delimiter = &amp;#39;-&amp;#39;;
&lt;span class="gu"&gt;@@ -1046,10 +1046,10 @@ function get_s3_url_domain( $bucket, $region = &amp;#39;&amp;#39;,&lt;/span&gt;
$expires = null, $args = arra
            $s3_domain = $bucket;
        }
        elseif ( &amp;#39;path&amp;#39; === $args[&amp;#39;domain&amp;#39;] || $this-&amp;gt;use_ssl( $args[&amp;#39;ssl&amp;#39;] ) )
{
&lt;span class="gd"&gt;-           $s3_domain = $prefix . &amp;#39;.amazonaws.com/&amp;#39; . $bucket;&lt;/span&gt;
&lt;span class="gi"&gt;+           $s3_domain = $prefix . &amp;#39;.googleapis.com/&amp;#39; . $bucket;&lt;/span&gt;
        }
        else {
&lt;span class="gd"&gt;-           $s3_domain = $bucket . &amp;#39;.&amp;#39; . $prefix . &amp;#39;.amazonaws.com&amp;#39;;&lt;/span&gt;
&lt;span class="gi"&gt;+           $s3_domain = $bucket . &amp;#39;.&amp;#39; . $prefix . &amp;#39;.googleapis.com&amp;#39;;&lt;/span&gt;
        }

        return $s3_domain;
&lt;span class="gh"&gt;diff --git a/view/domain-setting.php b/view/domain-setting.php&lt;/span&gt;
&lt;span class="gh"&gt;index 44019c3..266fef4 100644&lt;/span&gt;
&lt;span class="gd"&gt;--- a/view/domain-setting.php&lt;/span&gt;
&lt;span class="gi"&gt;+++ b/view/domain-setting.php&lt;/span&gt;
&lt;span class="gu"&gt;@@ -21,12 +21,12 @@&lt;/span&gt;
            &amp;lt;label class=&amp;quot;subdomain-wrap &amp;lt;?php echo $subdomain_class; // xss
ok?&amp;gt;&amp;quot;&amp;gt;
                &amp;lt;input type=&amp;quot;radio&amp;quot; name=&amp;quot;domain&amp;quot; value=&amp;quot;subdomain&amp;quot; &amp;lt;?php
checked( $domain, &amp;#39;subdomain&amp;#39; ); ?&amp;gt; &amp;lt;?php echo $subdomain_disabled; // xss ok
?&amp;gt;&amp;gt;
                &amp;lt;?php _e( &amp;#39;Bucket name as subdomain&amp;#39;,
&amp;#39;amazon-s3-and-cloudfront&amp;#39; ); ?&amp;gt;
&lt;span class="gd"&gt;-               &amp;lt;p&amp;gt;http://bucket-name.s3.amazon.com/&amp;amp;hellip;&amp;lt;/p&amp;gt;&lt;/span&gt;
&lt;span class="gi"&gt;+               &amp;lt;p&amp;gt;http://bucket-name.storage.googleapis.com/&amp;amp;hellip;&amp;lt;/p&amp;gt;&lt;/span&gt;
            &amp;lt;/label&amp;gt;
            &amp;lt;label&amp;gt;
                &amp;lt;input type=&amp;quot;radio&amp;quot; name=&amp;quot;domain&amp;quot; value=&amp;quot;path&amp;quot; &amp;lt;?php checked(
$domain, &amp;#39;path&amp;#39; ); ?&amp;gt;&amp;gt;
                &amp;lt;?php _e( &amp;#39;Bucket name in path&amp;#39;, &amp;#39;amazon-s3-and-cloudfront&amp;#39; );
?&amp;gt;
&lt;span class="gd"&gt;-               &amp;lt;p&amp;gt;http://s3.amazon.com/bucket-name/&amp;amp;hellip;&amp;lt;/p&amp;gt;&lt;/span&gt;
&lt;span class="gi"&gt;+               &amp;lt;p&amp;gt;http://storage.googleapis.com/bucket-name/&amp;amp;hellip;&amp;lt;/p&amp;gt;&lt;/span&gt;
            &amp;lt;/label&amp;gt;
            &amp;lt;label&amp;gt;
                &amp;lt;input type=&amp;quot;radio&amp;quot; name=&amp;quot;domain&amp;quot; value=&amp;quot;virtual-host&amp;quot; &amp;lt;?php
checked( $domain, &amp;#39;virtual-host&amp;#39; ); ?&amp;gt;&amp;gt;
&lt;/pre&gt;&lt;/div&gt;</content><category term="wordpress"></category><category term="google cloud storage"></category><category term="s3"></category><category term="media"></category><category term="uploads"></category><category term="google"></category></entry><entry><title>Arduino wireless LiPo monitoring</title><link href="//tim.purewhite.id.au/2015/02/arduino-lipo-wireless-monitor/" rel="alternate"></link><published>2015-02-21T00:00:00+10:00</published><updated>2015-02-21T00:00:00+10:00</updated><author><name>Tim White</name></author><id>tag:tim.purewhite.id.au,2015-02-21:/2015/02/arduino-lipo-wireless-monitor/</id><summary type="html">&lt;p&gt;&lt;img alt="Crashed RC Car" src="//tim.purewhite.id.au/images/2015/IMG_20150221_150813_edit.jpg"&gt;&lt;/p&gt;
&lt;p&gt;Over the last few months, I've been getting back into electronics. It's really
not fair what's available now, that wasn't available when I was a kid!
Arduino's for a start are a very easy way to get into microcontrollers. And
with the Arduino scene has come lots of small electronic â€¦&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;img alt="Crashed RC Car" src="//tim.purewhite.id.au/images/2015/IMG_20150221_150813_edit.jpg"&gt;&lt;/p&gt;
&lt;p&gt;Over the last few months, I've been getting back into electronics. It's really
not fair what's available now, that wasn't available when I was a kid!
Arduino's for a start are a very easy way to get into microcontrollers. And
with the Arduino scene has come lots of small electronic components for only a
few dollars each.&lt;/p&gt;
&lt;p&gt;As part of a bigger project, I'm automating my RC car from my childhood. The
Taiyo Edge car was an awesome toy as a kid, with it's ability to flip over and
still keep driving. As a kid, I'd get a top of 10 minutes driving time out of
the NiCd battery. Now I'm lucky to get 5 minutes. So the first part of my
project is to put an Arduino onboard, with a LiPo battery, and a NRF24L01 to
communicate back to my other Arduino for monitoring the battery voltage. Later
I'll use the the Arduino to control the car as well.i&lt;/p&gt;
&lt;p&gt;After designign the circuit in Fritzing, I proceeded to solder components to a
protoboard with the Arduino Nano. I recently purchased a proper soldering
station, temperature controlled, and I'm really glad I did. I wish I had one as
a kid. No more waiting for the iron to heat up, it's ready in 10 seconds or
less. Soon I have the Arduino Nano wirelessly reporting the LiPo's voltage back
to me, and wire it up to the car. The LiPo I got was a 7.2V 1000mAh pack,
that's about 1/2 the size of the NiCd that was in the car. Plenty of room for
it, and even with the lower voltage it drives the car well.&lt;/p&gt;
&lt;p&gt;We took the car outside for it's first test run on a LiPo, and was pleasently
surprised with how well it performed, and how long it went for! We had about 20
minutes driving time before we called it quits, and that was mostly due to the
rain, and because Nathan had crashed the car into the trampoline cracking the
shell. The voltage measurements continue to stream back to my computer inside,
which I monitored via my phone. By the time we stop, I still had plenty of
voltage to continue driving, and the LiPo hadn't warmed up at all.&lt;/p&gt;
&lt;p&gt;The next step is to remove the RC circuitry, work out what I can use, and then
replace it with circuitry that I can control via the Arduino. I also have some
Ultrasonic sensors for obsticle avoidance.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Receiving Arduino Uno" src="//tim.purewhite.id.au/images/2015/IMG_20150221_151115_edit.jpg"&gt;&lt;/p&gt;</content><category term="arduino"></category><category term="electronics"></category><category term="LiPo"></category><category term="nrf24l01"></category></entry><entry><title>Wordpress to Pelican</title><link href="//tim.purewhite.id.au/2014/03/wordpress-to-pelican/" rel="alternate"></link><published>2014-03-29T00:00:00+10:00</published><updated>2014-03-29T00:00:00+10:00</updated><author><name>Tim White</name></author><id>tag:tim.purewhite.id.au,2014-03-29:/2014/03/wordpress-to-pelican/</id><summary type="html">&lt;p&gt;It's been awhile since I last blogged. Since then, I've started a full time job
as a Systems Administrator. This means I have less time for maintaining my own
servers. So I've finally taken the plunge migrating some of the more static
sites to static. For example this Technical blog â€¦&lt;/p&gt;</summary><content type="html">&lt;p&gt;It's been awhile since I last blogged. Since then, I've started a full time job
as a Systems Administrator. This means I have less time for maintaining my own
servers. So I've finally taken the plunge migrating some of the more static
sites to static. For example this Technical blog will now be a static site. 
This doesn't mean it won't get updated, this just means that it's generated with
a static generator instead of being generated dynamically when someone views the
page. This results in lower server load, as it doesn't need PHP running, or a 
database. It results in faster page loads. It results in a more secure server as
it's just running a webserver and no web application.&lt;/p&gt;
&lt;p&gt;I believe it results in blogs that are more focused on content than on the web
application that displays the content.&lt;/p&gt;
&lt;p&gt;I've chosen to use &lt;a href="https://github.com/getpelican/pelican"&gt;Pelican&lt;/a&gt;, mostly
because I've enjoyed learning Python over the last year, and this gives me 
another excuse to play with some Python. I'm also more comfortable in Python than
some of the other options so this allows me to hack away on the code if I want to.&lt;/p&gt;
&lt;p&gt;Regarding the current lack of comments on the blog. I'm still thinking of the best
way to handle that. I may just put a Google+ comments plugin on, as I really
don't like Disqus. I may also just not put dynamic comments on and use Github issues
for discussing posts as some others have done.&lt;/p&gt;</content><category term="wordpress"></category><category term="pelican"></category></entry><entry><title>"Windows" is full of bloat</title><link href="//tim.purewhite.id.au/2013/05/windows-is-full-of-bloat/" rel="alternate"></link><published>2013-05-18T17:18:00+10:00</published><updated>2013-05-18T17:18:00+10:00</updated><author><name>Tim White</name></author><id>tag:tim.purewhite.id.au,2013-05-18:/2013/05/windows-is-full-of-bloat/</id><summary type="html">&lt;p&gt;It's been some time since I've had to do some work on a Windows
computer, in particular lots of software installs and uninstalls to
cleanup a slow computer.&lt;/p&gt;
&lt;p&gt;Now before you jump the gun, I'm not talking about Windows the operating
system being full of bloat, although it may be â€¦&lt;/p&gt;</summary><content type="html">&lt;p&gt;It's been some time since I've had to do some work on a Windows
computer, in particular lots of software installs and uninstalls to
cleanup a slow computer.&lt;/p&gt;
&lt;p&gt;Now before you jump the gun, I'm not talking about Windows the operating
system being full of bloat, although it may be. I'm also not talking
about the bloat that comes installed on OEM installs.&lt;/p&gt;
&lt;p&gt;What I am talking about, is how so much third party free windows
software is full of bloat. Just about every installer now wants to
install another piece of software with the piece you downloaded, ether a
toolbar or another "great" piece of software they recommend to you. And
then when you uninstall a piece of software, just about every piece of
software then insist on opening a webpage saying how sorry they are that
you uninstalled the software and would you please do this 5 minute
survey telling them why blah blah blah.&lt;/p&gt;
&lt;p&gt;And even my favourite antivirus Avast has started doing it. First, the
installer has jumped from 20Mb a few years ago to over 100Mb now. And
now when you install it, if you aren't watching out it'll try and
install Google Drive, and once it is installed it keeps popping up
asking you to install the great security extension for chrome, blah blah
blah.&lt;/p&gt;
&lt;p&gt;What ever happened to nice free software that wasn't packed full of
bloat, and that let you install and uninstall just that software that
you asked for without trying to push other software on you? I'll happily
keep my Linux world, where software does what you ask, and nothing more.&lt;/p&gt;
&lt;p&gt;And if you live in the Windows world, seriously, I think it's well past
time to get out, but you can still get out now!&lt;/p&gt;</content><category term="bloat"></category><category term="windows"></category></entry><entry><title>When did 'Linux' start moving away from it's simplicity?</title><link href="//tim.purewhite.id.au/2012/05/when-did-linux-start-moving-away-from-its-simplicity/" rel="alternate"></link><published>2012-05-08T19:46:00+10:00</published><updated>2012-05-08T19:46:00+10:00</updated><author><name>Tim White</name></author><id>tag:tim.purewhite.id.au,2012-05-08:/2012/05/when-did-linux-start-moving-away-from-its-simplicity/</id><summary type="html">&lt;p&gt;Today I had the joy of trying to change a users desktop environment from
Gnome, to Cinnamon, via ssh. At first I thought it would be easy, change
the default desktop environment in lightdm.conf and restart. Fail. Ok,
so where is a users desktop environment preference stored? .dmrc, or â€¦&lt;/p&gt;</summary><content type="html">&lt;p&gt;Today I had the joy of trying to change a users desktop environment from
Gnome, to Cinnamon, via ssh. At first I thought it would be easy, change
the default desktop environment in lightdm.conf and restart. Fail. Ok,
so where is a users desktop environment preference stored? .dmrc, or at
least I thought so. I even logged in with a brand new user and confirmed
that it saved the users desktop preference in \~/.dmrc. Except, if I
changed .dmrc for a user, it just got overwritten with the old contents
at their next automatic login. (Remember, ssh, so can't use the gui to
change what was selected in the lightdm login screen).&lt;br&gt;
Wha?!!? Surely not a dconf/gconf setting somewhere. Search search
search. Still no luck. Eventually I discover a service called
"AccountsService" or something along that name. It stores the users
".dmrc" contents in /var/lib/AccountsService/users/ with a file for each
user, which believe it or not, can't be changed by the user! Arg! (And I
believe you need to kill accountsservice to be able to change the
contents of the file and have it actually honored, I tried just changing
it, but ended up changing it then rebooting to get it to work)&lt;/p&gt;
&lt;p&gt;This is stupidity! Have a daemon, that one of it's tasks is to tell the
"display manager" what the users preferred desktop environment
preference is, that stores it in a place the user can't change, without
talking to the daemon! Oh, and write the contents of that file out to
.dmrc at login, but don't bother reading from that file.&lt;/p&gt;
&lt;p&gt;Doing some more digging, AccountService is for querying and manipulating
user account information via D-Bus, essentially replacing the useradd,
usermod and userdel commands. I can't find a "homepage" for it, the
homepage listed is it's source code repo.
(&lt;a href="http://cgit.freedesktop.org/accountsservice/"&gt;http://cgit.freedesktop.org/accountsservice/&lt;/a&gt;)Â  (NB: Some more digging
finds this &lt;a href="http://www.freedesktop.org/wiki/Software/AccountsService"&gt;http://www.freedesktop.org/wiki/Software/AccountsService&lt;/a&gt; as
the homepage)&lt;br&gt;
I personally don't mind D-Bus, it services its purposes, but here is an
instance where it looks like someone has gone to the trouble of writing
a piece of code, to complicate some that use to be a simple stat/open of
a file, that the user was in total control of.&lt;/p&gt;
&lt;p&gt;For the record, lightdm will work without AccountsService, and I believe
then it will honor \~/.dmrc&lt;br&gt;
Also, accountsservice isn't in Debian stable, but is in Debian testing,
and gdm3 and gnome depend on it. (So in other words Gnome3 depends on
it)&lt;/p&gt;
&lt;p&gt;I just don't understand why we need to reinvent the wheel, take
something that is so simple (and fits in the Unix "philosophies" of
everything is a file, and that file formats should be simple text based)
and turn it into something that user no longer has control over, for
something that sets their preference!&lt;/p&gt;
&lt;p&gt;Read
[http://blog.ngas.ch/archives/2011/12/13/the_destructive_desktop__mdash_linux_in_trouble/index.html][]for
some more thoughts on dbus.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;http://blog.ngas.ch/archives/2011/12/13/the_destructive_desktop__mdash_linux_in_trouble/index.html%20
&lt;/pre&gt;&lt;/div&gt;</content><category term="accountservice"></category><category term="accountsservice"></category><category term="dbus"></category><category term="Gnome3"></category><category term="Linux"></category><category term="simplicity"></category><category term="unix"></category></entry><entry><title>Google+ (Google's Social Network)</title><link href="//tim.purewhite.id.au/2011/07/google-googles-social-network/" rel="alternate"></link><published>2011-07-15T10:57:00+10:00</published><updated>2011-07-15T10:57:00+10:00</updated><author><name>Tim White</name></author><id>tag:tim.purewhite.id.au,2011-07-15:/2011/07/google-googles-social-network/</id><summary type="html">&lt;p&gt;By now you should have heard about Google+. You may have some idea of
what it is, or you may have none, so hopefully I can answer some of your
questions and help you get started.&lt;/p&gt;
&lt;p&gt;Firstly, Google+ is Google's latest entry into social networking.
Already it looks much better â€¦&lt;/p&gt;</summary><content type="html">&lt;p&gt;By now you should have heard about Google+. You may have some idea of
what it is, or you may have none, so hopefully I can answer some of your
questions and help you get started.&lt;/p&gt;
&lt;p&gt;Firstly, Google+ is Google's latest entry into social networking.
Already it looks much better than Buzz or Wave. What I like about it
already is that the interface is clean and simple, and most importantly
it is very easy to control your privacy settings. Now Facebook does have
a similar feature, but it is extremely difficult to use.&lt;/p&gt;
&lt;p&gt;Circles. You simple assign your "friends" to different circles, they can
be in more than one. Then, you can share a post/photo/video etc with
different circles, individual people, or the public. (There is also an
extended circles which I believe shares it with people in your circles,
and people in their circles). Want to let the world know about your new
baby, simply post it public! (Like twitter). Want to post how you are
having a dodgy day but only want your friends to know, and not your
boss, just post it to your friends circle and make sure you boss is in
your work circle. Want to share some good news with family and few close
friends, post it to your family circle and then add the extra friends in
as well!&lt;br&gt;
Circles make it very simple to control who see's what on your Google+
profile. Given the security scares of facebook stalkers and the like,
it's good to know you have total control over who see's what.&lt;/p&gt;
&lt;p&gt;Currently there are no Google+ games or apps. However for me that's a
bonus. I'm sick of all these status updates of "I just completed level
235 of bubble popping game...." and lots of other meaningless things
like that. I don't mind people playing games, but I don't want to hear
about it! What Google+ offers you out of the box though, is an amazing
tool for social network communications that will allow you to easily
keep in contact with people from all areas of your life, without getting
cluttered down in the mechanisms of the communications. Huddles allow
you to create a group of people for discussing something, like a group
assignment, complete with group video chat (which arrived before
Facebook announce the Skype Video partnership).&lt;/p&gt;
&lt;p&gt;I'm hoping that you have read this far and are at least interested in
trying Google+. For many people, until all your friends are there, you
aren't going to move. In fact, unless you are sick of the bloat of
facebook, you probably have very little incentive to move unless you
have privacy concerns with facebook. However I urge to to consider this,
someone has to take the first steps so that others will follow. And if
you need a good reason to take those first steps, I believe the privacy
issues of facebook should be enough for anyone to think twice about
facebook. And, if Google+ does flop, or you want to run away from it,
all the stuff you put on it is yours, there is a nice easy way to
download all your photos and other things on Google+ so you aren't
locked in!&lt;/p&gt;
&lt;p&gt;Now here is the hard part, Google+ is still currently invite only as
it's still in it's "trial" stages while they work out bugs. So below is
a form that you can put your name and email address in, and a short note
if you desire, and I'll invite you to Google+. Due to the demand for
invites, there are 2 things we do to try and get you in. First we send
you an invite, then we share a post with you. You'll get 2 emails, try
the invite one first, which should have a red button to "Learn more
about Google+" which will hopefully take you to the signin page to
create your profile. If that fails, the second email will have a link to
"View or Comment on Blah Blahs Post". This link will also hopefully take
you to a page where you can fill out your public profile and then sign
in to Google+.&lt;br&gt;
Both methods work at different times, so if it doesn't work for you
immediately, please wait an hour and try again.&lt;/p&gt;
&lt;p&gt;I promise to not do anything with your email address other than invite
you to Google+. Please be patient as I need to manually invite each
person unless I can work out some way to automate this. I am happy to
invite people I don't know, however please don't be offended if you
don't end up in my circles.&lt;/p&gt;
&lt;p&gt;(Form removed as invites no longer needed)&lt;/p&gt;</content><category term="facebook"></category><category term="google+"></category><category term="googleplus"></category><category term="invites"></category><category term="social network"></category></entry><entry><title>"The Ultimate Steal" is right</title><link href="//tim.purewhite.id.au/2011/06/the-ultimate-steal-is-right/" rel="alternate"></link><published>2011-06-02T14:17:00+10:00</published><updated>2011-06-02T14:17:00+10:00</updated><author><name>Tim White</name></author><id>tag:tim.purewhite.id.au,2011-06-02:/2011/06/the-ultimate-steal-is-right/</id><summary type="html">&lt;p&gt;Microsoft's student "Its not stealing" campaign is supposed to make it
easy for students to afford Microsoft products so they don't need to
pirate them (and steal them). That's fine as long as it works and
Microsoft don't steal from us!&lt;/p&gt;
&lt;p&gt;Twice I've now attempted to place an order with â€¦&lt;/p&gt;</summary><content type="html">&lt;p&gt;Microsoft's student "Its not stealing" campaign is supposed to make it
easy for students to afford Microsoft products so they don't need to
pirate them (and steal them). That's fine as long as it works and
Microsoft don't steal from us!&lt;/p&gt;
&lt;p&gt;Twice I've now attempted to place an order with the online system, twice
the order has been denied however the pre-authorisation on my credit
card means I'm now \$300 "out of pocket" until the transactions are
reversed in the next 5 business days. I've called my bank (before trying
to place the order the second time) to ensure that there wasn't a
problem with my account or the credit card. No problem from the banks
end, it should have gone through.&lt;/p&gt;
&lt;p&gt;Fittingly the email I got from them after complaining comes from "The
Ultimate Steal AU". We'll it sure is the ultimate steal, lets take your
money and give you nothing. And yes, I know I get the money back, but
it's my time and effort I'm wasting, and if I needed that money to pay a
bill, it's not there. Experiences like this sure make me want to buy
from Micro\$oft!! Oh, and if I was rich and had lots of money in my
account, each time I hit submit to attempt again (like the text
suggests) would be another \$150 pre-authorisation without success. Not
a great payment system if you ask me, no safety limits to prevent you
from trying again and again. You could easily have a few thousand
dollars in pre-auth as you keep checking the details, sure they are
correct, you hit submit.&lt;/p&gt;
&lt;p&gt;Hopefully they can fix it faster than the amount of time I spent on hold
just to be told they can't do anything!&lt;/p&gt;</content><category term="digital river"></category><category term="micro$oft"></category><category term="microsoft"></category><category term="steal"></category></entry><entry><title>What it takes to keep things running. (How to reduce comment/wiki spam)</title><link href="//tim.purewhite.id.au/2011/04/what-it-takes-to-keep-things-running-how-to-reduce-commentwiki-spam/" rel="alternate"></link><published>2011-04-05T22:13:00+10:00</published><updated>2011-04-05T22:13:00+10:00</updated><author><name>Tim White</name></author><id>tag:tim.purewhite.id.au,2011-04-05:/2011/04/what-it-takes-to-keep-things-running-how-to-reduce-commentwiki-spam/</id><summary type="html">&lt;p&gt;I recently pushed out a new version of the &lt;a href="http://hotspot.purewhite.id.au/"&gt;GRASE Hotspot&lt;/a&gt;. I spent
lots of time working on rewriting the splash/welcome page, and login
forms so that they would work even with javascript disabled, and allow
you to force it into the non javascript version if you are having â€¦&lt;/p&gt;</summary><content type="html">&lt;p&gt;I recently pushed out a new version of the &lt;a href="http://hotspot.purewhite.id.au/"&gt;GRASE Hotspot&lt;/a&gt;. I spent
lots of time working on rewriting the splash/welcome page, and login
forms so that they would work even with javascript disabled, and allow
you to force it into the non javascript version if you are having
problems (so browsers like Safari can be used). However, recently I've
spent a lot of time just doing maintenance.&lt;/p&gt;
&lt;p&gt;The maintenance started when again I spent lots of time cleaning up spam
on the wiki, this was after enabling ReCAPTCHA. I decided it wasn't
practical to keep cleaning up the wiki, and seeing as I was the only one
contributing to it, it made more sense migrating it to a Wordpress site.
After the migration was done, I quickly started getting comment spam on
the new site!! Thankfully, Akismet blocks comment spam, but the volume
of spam coming in was enormous! A peek into the server logs showed that
the same ip's that were publishing spam in the wiki, would try to get
post to the missing wiki, find it missing and discover the wordpress
site and immediately try to post comment spam! It was time to reduce the
load on the server if possible.&lt;/p&gt;
&lt;p&gt;After some research, I implemented some basic .htaccess rules that would
block some of the spam even getting processed. But why couldn't I find a
simple DNSBL for Apache? Turns out the right googling will find
libapache2-mod-spamhaus, which does what we need. But unlike email spam,
it seems comment/wiki spammers aren't in the DNSBL's as much as email
spammers. Thankfully, libapache2-mod-spamhaus was now dropping about
half the spamming connections.&lt;/p&gt;
&lt;p&gt;Some more research turned up &lt;a href="http://www.projecthoneypot.org?rf=93412" title="Project Honey Pot"&gt;Project Honey Pot&lt;/a&gt; which is aimed more
at the comment spammers and address harvesters. A quick check of the ip
database they maintain revealed that most of the remaining comment
spammer ips that were hitting my site were in their database!
Unfortunately, the mod_httpbl module for Apache isn't in a nice
repository anywhere, and hasn't been touched for awhile, so setup wasn't
as easy. I found &lt;a href="http://repel.in-progress.com/"&gt;Repel&lt;/a&gt; which is a simple Python program that you use
with mod_rewrite (and RewriteMap's). It's not so easy to setup, mainly
due to the instructions being a little unclear, but also because the
rewrite rules that use Repel can be very tricky. The documentation was
good for just blocking, however I figured if I was going to use Project
Honey Pot, I should contribute too, so I setup a honeypot on the site
and then had fun and games with rewrite rules. Eventually though, I got
it all setup. Now if you are thinking of setting this up yourself, it's
probably a lot easier using the &lt;a href="http://wordpress.org/extend/plugins/httpbl/" title="Wordpress Http:bl Plugin"&gt;Wordpress Plugin&lt;/a&gt; which I've since
setup on another site I assist with. While this will block the spammers,
or direct them to a honeypot, it may have slightly more load than Repel.
This is because Repel is a little python program, that apache already
has running, and just passes the ipaddress to and waits for a reply. The
wordpress plugin solution requires Apache to fire up PHP, which then
fires up Wordpress, which then loads the plugin which finally gets the
ipaddress, does the DNS lookup and then goes from there. I've done no
testing, but logically Repel would appear to use less resources, but you
are welcome to prove me wrong.&lt;/p&gt;
&lt;p&gt;On top of all that maintenance, I also had some mail servers receiving
spam, which should have been blocked. Some more tweaks and changes, and
another influx of spam is now not getting past the gate.&lt;/p&gt;
&lt;p&gt;Lastly, some advice. Password advice. In particular because I heard an
"expert" on the ABC radio recently giving some poor advice. Get yourself
a strong password, with letters and numbers, maybe some capital letters
as well as lowercase, and decent length, at least 8 characters long. Now
use that password for one place, and only one place, maybe your email
account. Now find another one, just as strong, use that for your next
account, maybe facebook. Reusing passwords is a big No No, as an
important CEO recently discovered.&lt;br&gt;
I can hear you already, moaning and groaning. It's so hard to remember
one really strong password, how can you remember more than one? Well
this is the easy part. You use a formula. I've started using
&lt;a href="https://www.pwdhash.com/" title="PwdHash"&gt;PwdHash&lt;/a&gt;, developed by Standford University. It simply takes the
domain name of the site you are generating the password, and your master
password, and creates you a "hash" that you use as your password for
that site. So for example, if my master password was
'thecatsatonthemat', my facebook password would be
'F58VFRH8eUejfcIs9UA'. This will let you create strong unique passwords
for each account, then if one of your accounts is broken into and the
password somehow discovered, your other accounts are safe. Of course, if
your email account gets broken into, a lot of other accounts are not
safe as the hacker can then just reset your passwords by using the "Lost
Password" feature many sites provide.&lt;/p&gt;
&lt;p&gt;If you do decide to use PwdHash, you can install a firefox extension
that assist, or you can use it directly on the site (as it uses
Javascript, your password never leaves the computer, you can even save
the page and use it offline). I found a little python script that does
it for me, which I have on my server and my machine, so I can create my
pwdhash's even when I don't have a browser handy. Of course, there is
nothing preventing you having multiple master passwords ether, just to
make it even more secure!&lt;/p&gt;</content><category term="password"></category><category term="project honey pot"></category><category term="pwdhash"></category><category term="security"></category><category term="spam"></category></entry></feed>